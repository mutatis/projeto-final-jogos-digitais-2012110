<!DOCTYPE HTML>

<html>
	
	<head>
	
	
		<title>
		
		Balloon Party
		
		</title>
		
<script src="js/Background.js"></script>
<script src="js/botao.js"></script>
<script src="js/creditos.js"></script>
<script src="js/Introducao.js"></script>	
<script src="js/instrucao.js"></script>	
<script src="js/enemy.js"></script>
<script src="js/level1.js"></script>
<script src="js/music.js"></script>
<script src="js/game.js"></script>		
		
	</head>
	
	<body>

		
	<canvas width="800" height="600" id="main" style="border:1px Solid #000000;">
	</canvas>
		
		<script>
		
		var canvas = document.getElementById("main");
		var screen = canvas.getContext("2d");
		
		var SCREENWIDTH =  800;
		var SCREENHEIGHT = 600;
		
		var tempo_seg=0; 
		var ponto=0;
		var vida=3;		
				
		var introducao = new Introducao();
		
		var creditos = new Creditos();

		var instrucao = new Instrucao();
		
		var game = new Jogo();
				
		var level1 = new Level1();
						
		var SCENE = {INTRODUCAO:0, INSTRUCAO:1, LEVEL1:2, GAME:3, CREDITOS:4};
        var currentScene = SCENE.INTRODUCAO;
		
		load();
		
		function load()
		{
				
		console.log("load");

			if((true))//to do...
				{	
				console.log("carreguei");
				loop();
				}
			else
				{
				console.log("nao carreguei");
				setTimeout(load, 30 );
				}
			
		}
		
		function loop()
		{
		//console.log("loop");

		//o loop do jogo faz chamadas para update e draw

			update();

				draw();

				//o loop do jogo se chama a cada 30 ms, +- 30 FPS (1/30) ~ 33 fps
			setTimeout(loop, 1000/60 );

		}	
		
		function update()
	{	
		switch(currentScene)
	{
		case SCENE.INTRODUCAO:
	{
			introducao.update();	
	}
			break;

		case SCENE.CREDITOS:
	{
			creditos.update();
	}
			break;
		case SCENE.INSTRUCAO:
	{
			instrucao.update();
	}
			break;
		case SCENE.GAME:
	{
			game.update();
	}
			break;

		case SCENE.LEVEL1:
	{
			level1.update();
	}
			break;
	}
}				
		
		function draw()
{
				{
		clear();

			switch(currentScene)
			{
			case SCENE.INTRODUCAO:
				{
 				introducao.draw();
				}
			break;
			case SCENE.CREDITOS:
				{
				creditos.draw();
				}
			break;

			case SCENE.INSTRUCAO:
				{
				instrucao.draw();
				}
			break;
			case SCENE.GAME:
				{
				game.draw();
				}
			break;

		case SCENE.LEVEL1:
				{
				level1.draw();
				}
			break;
			
     			 }				
			
		}
}	
	function clear()
	{
		screen.clearRect(0,0,800,600);
	}
			
		function Collide(x1, y1, w1, h1, x2, y2, w2, h2)
		{
			if((x1+w1<x2)
			||(x1>x2+w2)
			||(y1+h1<y2)
			||(y1>y2+h2))
			{
				return false;	
			}
			else
			{
				return true;	
			}
		}//fecha o collide
		
		
		window.addEventListener('mousedown', mouse_down, true);
		
		function mouse_down(mouse)
		{
				switch(currentScene)
				{		
					case  SCENE.INTRODUCAO:
					{	
						//console.log("mous x " + mouse.x, "mouse y " + mouse.y)	
						introducao.mouse_down(mouse);
					}
					break;
			case SCENE.CREDITOS:
			{
				creditos.mouse_down(mouse);
			}
				break;

			case SCENE.INSTRUCAO:
			{
				instrucao.mouse_down(mouse);
			}
				break;

			case SCENE.LEVEL1:
			{
				level1.mouse_down(mouse);
			}
				break;
			}
			
				console.log("down X "+ mouse.x + "down Y "+ mouse.y);
			
				//console.log("BX "+balao_red_posicao_x+"BY"+ balao_red_posicao_y+"BW"+ balao_red_tamanho_w+"BH"+ balao_red_tamanho_h);
			}

	
		
		
		</script>
	
	
	</body>

</html>